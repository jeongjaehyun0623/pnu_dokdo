<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>독도, 역사의 기록</title>
    
    <!-- React & ReactDOM -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- Babel for JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Framer Motion -->
    <script src="https://unpkg.com/framer-motion@10.16.4/dist/framer-motion.js"></script>
    
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700;900&family=Noto+Serif+KR:wght@400;700&display=swap');
        
        body {
            font-family: 'Noto Sans KR', sans-serif;
            background-color: #0f172a; /* Slate 900 */
            color: #e2e8f0;
        }
        
        .serif {
            font-family: 'Noto Serif KR', serif;
        }

        .scroll-hide::-webkit-scrollbar {
            display: none;
        }
        .scroll-hide {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useMemo } = React;
        const { motion, AnimatePresence } = window.Motion;

        // 데이터 정의
        const rawData = [
            { year: "1454", title: "세종실록지리지", desc: "우산(독도)과 무릉(울릉도)이 강원도 울진현에 속한다고 기록", source: "[1]", category: "조선시대" },
            { year: "1531", title: "신증동국여지승람", desc: "독도가 우리 영토임을 밝히는 관찬 지리지 편찬", source: "[2]", category: "조선시대" },
            { year: "1667", title: "은주시청합기", desc: "일본의 문헌. 울릉도와 독도가 일본 영토 밖(조선 땅)임을 기록", source: "[3]", category: "조선시대" },
            { year: "1693", title: "1차 안용복 사건", desc: "안용복이 일본으로 끌려가 독도가 조선 땅임을 주장", source: "[4]", category: "조선시대" },
            { year: "1696", title: "2차 안용복 사건", desc: "안용복이 일본에 건어가 불법 침범에 항의. 일본 막부가 '울릉도 도해 금지령' 내림", source: "[5]", category: "조선시대" },
            { year: "1785", title: "삼국접양지도", desc: "일본 하야시 시헤이가 제작. 독도를 조선색(황색)으로 칠하고 '조선의 것'이라 표기", source: "[6]", category: "조선시대" },
            { year: "1877", title: "태정관 지령", desc: "일본 최고 행정기관이 '독도와 울릉도는 일본과 관계없다'고 공식 인정", source: "[7]", category: "개항기" },
            { year: "1900", title: "대한제국 칙령 41호", desc: "고종 황제가 독도를 울릉군의 관할 구역으로 공식 반포", source: "[8]", category: "개항기" },
            { year: "1905", title: "시마네현 고시 40호", desc: "일본이 러일전쟁 중 독도를 불법적으로 '다케시마'로 편입", source: "[9]", category: "일제강점기" },
            { year: "1906", title: "심흥택 보고서", desc: "울릉군수 심흥택이 독도가 일본에 편입되었다는 소식을 듣고 중앙 정부에 보고", source: "[8]", category: "일제강점기" },
            { year: "1946", title: "SCAPIN 제677호", desc: "연합군최고사령관 지령. 독도를 일본의 통치권에서 제외함", source: "[10]", category: "광복/현대" },
            { year: "1951", title: "샌프란시스코 강화조약", desc: "일본이 한국의 독립을 인정 (독도 명시 누락으로 분쟁의 씨앗이 됨)", source: "[11]", category: "광복/현대" },
            { year: "1952", title: "평화선 선포", desc: "이승만 대통령이 독도를 포함한 인접 해양 주권 선언", source: "[12]", category: "광복/현대" },
            { year: "1953", title: "독도의용수비대 활동", desc: "홍순칠 등 민간인들이 독도에 상주하며 일본의 침범을 막음", source: "[13], [14]", category: "광복/현대" },
            { year: "1965", title: "한일기본조약", desc: "독도 문제를 언급하지 않고 봉합 (이후 갈등 잠복)", source: "[15]", category: "광복/현대" },
            { year: "1998", title: "신한일어업협정", desc: "독도가 한일 중간수역에 포함되며 논란 발생", source: "[16]", category: "광복/현대" },
            { year: "2005", title: "다케시마의 날 제정", desc: "일본 시마네현이 2월 22일을 '다케시마의 날'로 제정", source: "[17]", category: "광복/현대" },
            { year: "2011", title: "일본 교과서 왜곡", desc: "일본 중학교 교과서 14종에 독도 영유권 주장 기술", source: "[18]", category: "광복/현대" }
        ];

        // 아이콘 컴포넌트
        const Icon = ({ name, size = 24, className }) => {
            const iconRef = React.useRef(null);
            
            React.useEffect(() => {
                if (window.lucide) {
                    window.lucide.createIcons({
                        icons: { [name]: iconRef.current },
                        nameAttr: 'data-lucide'
                    });
                }
            }, [name]);

            return <i data-lucide={name} ref={iconRef} className={className} style={{ width: size, height: size }}></i>;
        };

        // 메인 앱 컴포넌트
        function App() {
            const [filter, setFilter] = useState("전체");
            const [selectedId, setSelectedId] = useState(null);

            const categories = ["전체", "조선시대", "개항기", "일제강점기", "광복/현대"];

            const filteredData = useMemo(() => {
                if (filter === "전체") return rawData;
                return rawData.filter(item => {
                    if (filter === "조선시대") return item.category === "조선시대";
                    if (filter === "개항기") return item.category === "개항기";
                    if (filter === "일제강점기") return item.category === "일제강점기";
                    return item.category === "광복/현대";
                });
            }, [filter]);

            return (
                <div className="min-h-screen bg-slate-900 text-slate-100 pb-20 overflow-x-hidden">
                    {/* Hero Section */}
                    <header className="relative h-[60vh] flex flex-col items-center justify-center text-center px-4 overflow-hidden">
                        <div className="absolute inset-0 bg-[url('https://images.unsplash.com/photo-1543199839-a9c403328574?q=80&w=2070&auto=format&fit=crop')] bg-cover bg-center opacity-30"></div>
                        <div className="absolute inset-0 bg-gradient-to-b from-slate-900/50 via-slate-900/80 to-slate-900"></div>
                        
                        {/* Home Button (Redesigned) */}
                        <div className="absolute top-6 left-6 z-50">
                            <a 
                                href="index.html" 
                                className="group flex items-center gap-2 px-5 py-2.5 rounded-full bg-slate-900/30 hover:bg-slate-800/60 border border-slate-700/50 text-slate-300 hover:text-white hover:border-indigo-400 transition-all duration-300 backdrop-blur-md"
                            >
                                <Icon name="arrow-left" size={16} className="group-hover:-translate-x-1 transition-transform duration-300" />
                                <span className="text-sm font-medium tracking-wide">메인으로</span>
                            </a>
                        </div>

                        <motion.div 
                            initial={{ opacity: 0, y: 30 }}
                            animate={{ opacity: 1, y: 0 }}
                            transition={{ duration: 0.8 }}
                            className="relative z-10"
                        >
                            <span className="inline-block py-1 px-3 rounded-full bg-indigo-500/20 text-indigo-300 text-sm font-semibold mb-4 border border-indigo-500/30">
                                대한민국의 영토
                            </span>
                            <h1 className="text-5xl md:text-7xl font-bold mb-4 serif tracking-tight">
                                독도 연대기
                            </h1>
                            <p className="text-slate-400 text-lg md:text-xl max-w-2xl mx-auto font-light">
                                역사의 기록이 증명하는 진실. <br/>
                                1454년부터 현재까지, 독도를 지켜온 주요 사건들을 확인하세요.
                            </p>
                        </motion.div>
                        
                        <motion.div 
                            initial={{ opacity: 0 }}
                            animate={{ opacity: 1 }}
                            transition={{ delay: 1, duration: 1 }}
                            className="absolute bottom-10 animate-bounce"
                        >
                            <Icon name="chevron-down" size={32} className="text-slate-500" />
                        </motion.div>
                    </header>

                    {/* Filter Section */}
                    <div className="sticky top-0 z-40 bg-slate-900/90 backdrop-blur-md border-b border-slate-800 py-4 mb-12">
                        <div className="max-w-6xl mx-auto px-4 overflow-x-auto scroll-hide">
                            <div className="flex justify-start md:justify-center space-x-2 min-w-max">
                                {categories.map((cat) => (
                                    <button
                                        key={cat}
                                        onClick={() => setFilter(cat)}
                                        className={`px-4 py-2 rounded-full text-sm transition-all duration-300 ${
                                            filter === cat 
                                            ? "bg-indigo-600 text-white shadow-lg shadow-indigo-600/30 font-medium" 
                                            : "bg-slate-800 text-slate-400 hover:bg-slate-700 hover:text-slate-200"
                                        }`}
                                    >
                                        {cat}
                                    </button>
                                ))}
                            </div>
                        </div>
                    </div>

                    {/* Timeline Container */}
                    <div className="max-w-5xl mx-auto px-4 relative">
                        {/* Center Line (Hidden on mobile) */}
                        <div className="absolute left-4 md:left-1/2 top-0 bottom-0 w-0.5 bg-gradient-to-b from-indigo-500 via-slate-700 to-slate-900 md:-ml-0.5"></div>

                        <div className="space-y-12">
                            <AnimatePresence mode="wait">
                                {filteredData.map((item, index) => (
                                    <TimelineItem 
                                        key={item.year} 
                                        item={item} 
                                        index={index} 
                                        onClick={() => setSelectedId(item.year)}
                                    />
                                ))}
                            </AnimatePresence>
                        </div>
                    </div>

                    {/* Footer */}
                    <footer className="mt-24 text-center text-slate-500 text-sm pb-8">
                        <p>참고 문헌: [1]~[18] 각주 원본 참조</p>
                        <p className="mt-2">Copyright © 2024 Dokdo History Project</p>
                    </footer>

                    {/* Modal for Details */}
                    <AnimatePresence>
                        {selectedId && (
                            <DetailModal 
                                item={rawData.find(i => i.year === selectedId)} 
                                onClose={() => setSelectedId(null)} 
                            />
                        )}
                    </AnimatePresence>
                </div>
            );
        }

        // Timeline Item Component
        function TimelineItem({ item, index, onClick }) {
            const isEven = index % 2 === 0;

            return (
                <motion.div 
                    initial={{ opacity: 0, y: 50 }}
                    whileInView={{ opacity: 1, y: 0 }}
                    viewport={{ once: true, margin: "-100px" }}
                    transition={{ duration: 0.5, delay: index * 0.05 }}
                    className={`relative flex flex-col md:flex-row items-start ${isEven ? 'md:flex-row-reverse' : ''} group`}
                >
                    {/* Timeline Dot */}
                    <div className="absolute left-4 md:left-1/2 w-4 h-4 bg-slate-900 border-4 border-indigo-500 rounded-full transform -translate-x-1.5 md:-translate-x-2 mt-6 z-10 group-hover:scale-125 group-hover:border-indigo-400 transition-transform duration-300 shadow-[0_0_10px_rgba(99,102,241,0.5)]"></div>

                    {/* Content Card */}
                    <div 
                        onClick={onClick}
                        className={`ml-12 md:ml-0 md:w-1/2 ${isEven ? 'md:pr-12' : 'md:pl-12'} cursor-pointer`}
                    >
                        <div className="bg-slate-800/50 hover:bg-slate-800 border border-slate-700 hover:border-indigo-500/50 p-6 rounded-xl transition-all duration-300 shadow-lg hover:shadow-xl hover:shadow-indigo-900/10 group">
                            <div className="flex items-baseline justify-between mb-2">
                                <span className="text-3xl font-bold text-indigo-400 serif">{item.year}</span>
                                <span className="text-xs font-mono text-slate-500 border border-slate-700 rounded px-1.5 py-0.5">{item.category}</span>
                            </div>
                            <h3 className="text-xl font-bold text-slate-100 mb-2 group-hover:text-indigo-200 transition-colors">
                                {item.title}
                            </h3>
                            <p className="text-slate-400 text-sm leading-relaxed line-clamp-2">
                                {item.desc}
                            </p>
                            <div className="mt-4 flex items-center text-xs text-indigo-400 opacity-0 group-hover:opacity-100 transition-opacity">
                                <span>상세보기</span>
                                <Icon name="arrow-right" size={14} className="ml-1" />
                            </div>
                        </div>
                    </div>
                </motion.div>
            );
        }

        // Modal Component
        function DetailModal({ item, onClose }) {
            if (!item) return null;

            return (
                <motion.div 
                    initial={{ opacity: 0 }}
                    animate={{ opacity: 1 }}
                    exit={{ opacity: 0 }}
                    className="fixed inset-0 z-50 flex items-center justify-center px-4"
                >
                    <div className="absolute inset-0 bg-black/80 backdrop-blur-sm" onClick={onClose}></div>
                    
                    <motion.div 
                        initial={{ scale: 0.9, y: 20 }}
                        animate={{ scale: 1, y: 0 }}
                        exit={{ scale: 0.9, y: 20 }}
                        className="bg-slate-800 border border-slate-700 rounded-2xl max-w-lg w-full p-8 relative shadow-2xl z-50"
                        onClick={(e) => e.stopPropagation()}
                    >
                        <button 
                            onClick={onClose}
                            className="absolute top-4 right-4 text-slate-400 hover:text-white p-2 rounded-full hover:bg-slate-700 transition-colors"
                        >
                            <Icon name="x" size={24} />
                        </button>

                        <div className="mb-6">
                            <span className="text-5xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-indigo-400 to-cyan-400 serif">
                                {item.year}
                            </span>
                            <div className="mt-2 inline-block px-3 py-1 rounded-full bg-slate-700 text-slate-300 text-xs font-semibold">
                                {item.category}
                            </div>
                        </div>

                        <h2 className="text-2xl font-bold text-white mb-4">{item.title}</h2>
                        
                        <div className="bg-slate-900/50 p-6 rounded-xl border border-slate-700/50 mb-6">
                            <p className="text-slate-300 leading-relaxed text-lg">
                                {item.desc}
                            </p>
                        </div>

                        <div className="flex items-center justify-between text-sm text-slate-500 border-t border-slate-700 pt-4">
                            <span className="flex items-center gap-2">
                                <Icon name="book-open" size={16} />
                                출처: {item.source}
                            </span>
                            <button 
                                className="text-indigo-400 hover:text-indigo-300 font-medium"
                                onClick={() => {
                                    window.open(`https://www.google.com/search?q=독도+${item.title}+${item.year}`, '_blank');
                                }}
                            >
                                관련 검색 →
                            </button>
                        </div>
                    </motion.div>
                </motion.div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
